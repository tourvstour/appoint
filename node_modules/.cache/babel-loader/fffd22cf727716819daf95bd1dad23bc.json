{"ast":null,"code":"var _jsxFileName = \"I:\\\\ANYcode\\\\react\\\\samroiyod_next-app\\\\src\\\\Components\\\\Massage.jsx\";\nimport React, { Component } from 'react';\nimport { Steps, Icon, Card, Select, Col, DatePicker, Button, notification, Table, Modal } from 'antd';\nimport moment from 'moment';\nimport Logo from '../Components/Logo';\nimport { connect } from 'react-redux';\nconst Option = Select.Option;\nconst Step = Steps.Step;\n\nconst disabledDate = cur => {\n  return cur < moment().add(+1, 'day') || cur > moment().add(+60, 'day');\n};\n\nclass Massage extends Component {\n  constructor() {\n    super();\n\n    this.changeDate = (e, a) => {\n      try {\n        let dayOff = e._d.getDay();\n\n        fetch(\"http://183.88.219.85:7078/appoint/day_off.php\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            datec: a\n          })\n        }).then(res => res.json()).then(res => {\n          let dayOffSpacial = res.map(a => a.dayoff_date),\n              dayOffDesc = res.map(a => a.dayoff_name);\n\n          const openNotificationWithIcon = type => {\n            notification[type]({\n              duration: null,\n              message: 'ไม่สามารถเลือกวันหยุดราชการได้',\n              description: 'กรุณาเลือกวันนัดในวันทำการ',\n              btn: React.createElement(Button, {\n                onClick: () => notification.destroy(),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 71\n                },\n                __self: this\n              }, \"close\")\n            });\n          };\n\n          const dayOff_hospital = type => {\n            notification[type]({\n              duration: null,\n              message: \"ไม่สามารถเลือกวันหยุดราชการได้\",\n              description: dayOffSpacial + \" \" + dayOffDesc,\n              btn: React.createElement(Button, {\n                onClick: () => notification.destroy(),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 79\n                },\n                __self: this\n              }, \"close\")\n            });\n          };\n\n          if (dayOff === 0 || dayOff === 6) {\n            openNotificationWithIcon('warn');\n          } else if (dayOffSpacial.length !== 0) {\n            dayOff_hospital('warning');\n          } else {\n            this.setState({\n              dateAppoint: a\n            });\n            fetch(\"http://183.88.219.85:7078/appoint/massage_service.php\", {\n              method: \"POST\",\n              body: JSON.stringify({\n                type: 'service',\n                date: a\n              })\n            }).then(res => res.json()).then(res => {\n              this.setState({\n                docService: res\n              });\n            });\n          }\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.expandedRowRender = e => {\n      console.log(e);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"\\u0E40\\u0E27\\u0E25\\u0E32\\u0E19\\u0E31\\u0E14\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\")), e.childrens.map(a => React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, a.time), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Button, {\n        disabled: a.dis,\n        onClick: () => this.selectTime([{\n          timeId: a.timeId,\n          timeName: a.time,\n          servicePointId: a.servicePointId,\n          date: e.serviceDate,\n          docId: e.docId,\n          docName: e.docName\n        }]),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, a.stat)))))));\n    };\n\n    this.selectTime = e => {\n      //console.log(e)\n      this.setState({\n        serviceModal: true,\n        selectTime: e\n      });\n    };\n\n    this.selectService = e => {\n      console.log(e + \"-\" + this.state.selectTime);\n    };\n\n    this.selectServiceOk = () => {\n      this.setState({\n        serviceModal: false\n      });\n    };\n\n    this.selectServiceCancel = () => {\n      this.setState({\n        serviceModal: false\n      });\n    };\n\n    this.state = {\n      service: [],\n      dateAppoint: [],\n      docService: [],\n      subService: [],\n      selectTime: [],\n      serviceModal: false,\n      selectService: \"\",\n      column: [{\n        title: 'name',\n        dataIndex: 'docName'\n      }, {\n        title: \"วันที่\",\n        dataIndex: \"serviceDate\"\n      }],\n      subColumn: [{\n        title: 'เวลานัด',\n        dataIndex: ''\n      }, {\n        title: \"สถานะ\",\n        dataIndex: \"\"\n      }]\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://183.88.219.85:7078/appoint/service.php\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        point: 2\n      })\n    }).then(res => res.json()).then(res => {\n      this.setState({\n        service: res\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(Logo, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(Steps, {\n      progressDot: true,\n      current: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(Step, {\n      title: \"\\u0E25\\u0E07\\u0E17\\u0E30\\u0E40\\u0E1A\\u0E35\\u0E22\\u0E19\",\n      description: React.createElement(Icon, {\n        style: {\n          fontSize: \"25px\",\n          color: \"#3399ff\"\n        },\n        type: \"idcard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(Step, {\n      title: \"\\u0E17\\u0E33\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E19\\u0E31\\u0E14\\u0E2B\\u0E21\\u0E32\\u0E22\",\n      description: React.createElement(Icon, {\n        style: {\n          fontSize: \"25px\",\n          color: \"#3399ff\"\n        },\n        type: \"solution\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(Step, {\n      title: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\",\n      description: React.createElement(Icon, {\n        style: {\n          fontSize: \"25px\"\n        },\n        type: \"file-done\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    })), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: {\n        span: 20,\n        offset: 2\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        borderRadius: \"20px\",\n        borderColor: \"#3399ff\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\")), React.createElement(\"table\", {\n      style: {\n        width: \"100%\",\n        fontSize: \"18px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D-\\u0E2A\\u0E01\\u0E38\\u0E25\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, this.props.person.map(a => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, a.prefix, \" \", a.fname, \" \", a.lname)))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"\\u0E40\\u0E25\\u0E02\\u0E1A\\u0E31\\u0E15\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E0A\\u0E32\\u0E0A\\u0E19\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, this.props.person.map(a => a.cid))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"\\u0E27\\u0E31\\u0E19\\u0E40\\u0E01\\u0E34\\u0E14\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, this.props.person.map(a => a.birth))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"\\u0E2A\\u0E34\\u0E17\\u0E18\\u0E34\\u0E4C\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, this.props.person.map(a => a.plans))))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"\\u0E19\\u0E31\\u0E14\\u0E41\\u0E1E\\u0E17\\u0E22\\u0E4C\\u0E41\\u0E1C\\u0E19\\u0E44\\u0E17\\u0E22\")), React.createElement(DatePicker, {\n      style: {\n        width: \"100%\"\n      },\n      onChange: this.changeDate,\n      size: \"large\",\n      disabledDate: disabledDate,\n      value: moment(this.state.dateAppoint),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Table, {\n      columns: this.state.column,\n      dataSource: this.state.docService,\n      expandedRowRender: this.expandedRowRender,\n      pagination: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    })))), React.createElement(Modal, {\n      title: \"เลือกบริการ\",\n      visible: this.state.serviceModal,\n      okText: \"ยืนยัน\",\n      cancelText: \"ยกเลิก\",\n      onOk: this.selectServiceOk,\n      onCancel: this.selectServiceCancel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(Select, {\n      style: {\n        width: \"200px\"\n      },\n      onSelect: this.selectService,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, this.state.service.map(a => React.createElement(Option, {\n      value: a.service_name_id + \"/\" + a.service_name_order,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, a.service_name_order))))));\n  }\n\n}\n\nconst data = state => {\n  return {\n    person: state.person\n  };\n};\n\nexport default connect(data)(Massage);","map":{"version":3,"sources":["I:\\ANYcode\\react\\samroiyod_next-app\\src\\Components\\Massage.jsx"],"names":["React","Component","Steps","Icon","Card","Select","Col","DatePicker","Button","notification","Table","Modal","moment","Logo","connect","Option","Step","disabledDate","cur","add","Massage","constructor","changeDate","e","a","dayOff","_d","getDay","fetch","method","body","JSON","stringify","datec","then","res","json","dayOffSpacial","map","dayoff_date","dayOffDesc","dayoff_name","openNotificationWithIcon","type","duration","message","description","btn","destroy","dayOff_hospital","length","setState","dateAppoint","date","docService","error","console","log","expandedRowRender","childrens","time","dis","selectTime","timeId","timeName","servicePointId","serviceDate","docId","docName","stat","serviceModal","selectService","state","selectServiceOk","selectServiceCancel","service","subService","column","title","dataIndex","subColumn","componentDidMount","point","render","fontSize","color","span","offset","borderRadius","borderColor","textAlign","width","props","person","prefix","fname","lname","cid","birth","plans","service_name_id","service_name_order","data"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,IAAtB,EAA4BC,MAA5B,EAAoCC,GAApC,EAAyCC,UAAzC,EAAqDC,MAArD,EAA6DC,YAA7D,EAA2EC,KAA3E,EAAkFC,KAAlF,QAA+F,MAA/F;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,MAAMC,MAAM,GAAGV,MAAM,CAACU,MAAtB;AACA,MAAMC,IAAI,GAAGd,KAAK,CAACc,IAAnB;;AACA,MAAMC,YAAY,GAAIC,GAAD,IAAS;AAC1B,SAAOA,GAAG,GAAGN,MAAM,GAAGO,GAAT,CAAa,CAAC,CAAd,EAAiB,KAAjB,CAAN,IAAiCD,GAAG,GAAGN,MAAM,GAAGO,GAAT,CAAa,CAAC,EAAd,EAAkB,KAAlB,CAA9C;AACH,CAFD;;AAIA,MAAMC,OAAN,SAAsBnB,SAAtB,CAAgC;AAC5BoB,EAAAA,WAAW,GAAG;AACV;;AADU,SAuCdC,UAvCc,GAuCD,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACnB,UAAI;AACA,YAAIC,MAAM,GAAGF,CAAC,CAACG,EAAF,CAAKC,MAAL,EAAb;;AACAC,QAAAA,KAAK,CAAC,+CAAD,EAAkD;AACnDC,UAAAA,MAAM,EAAE,MAD2C;AAEnDC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,YAAAA,KAAK,EAAET;AADU,WAAf;AAF6C,SAAlD,CAAL,CAMKU,IANL,CAMUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EANjB,EAOKF,IAPL,CAOUC,GAAG,IAAI;AACT,cAAIE,aAAa,GAAGF,GAAG,CAACG,GAAJ,CAAQd,CAAC,IAAIA,CAAC,CAACe,WAAf,CAApB;AAAA,cACIC,UAAU,GAAGL,GAAG,CAACG,GAAJ,CAAQd,CAAC,IAAIA,CAAC,CAACiB,WAAf,CADjB;;AAEA,gBAAMC,wBAAwB,GAAGC,IAAI,IAAI;AACrClC,YAAAA,YAAY,CAACkC,IAAD,CAAZ,CAAmB;AACfC,cAAAA,QAAQ,EAAE,IADK;AAEfC,cAAAA,OAAO,EAAE,gCAFM;AAGfC,cAAAA,WAAW,EAAE,4BAHE;AAIfC,cAAAA,GAAG,EAAE,oBAAC,MAAD;AAAQ,gBAAA,OAAO,EAAE,MAAMtC,YAAY,CAACuC,OAAb,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJU,aAAnB;AAMH,WAPD;;AAQA,gBAAMC,eAAe,GAAGN,IAAI,IAAI;AAC5BlC,YAAAA,YAAY,CAACkC,IAAD,CAAZ,CAAmB;AACfC,cAAAA,QAAQ,EAAE,IADK;AAEfC,cAAAA,OAAO,EAAE,gCAFM;AAGfC,cAAAA,WAAW,EAAET,aAAa,GAAG,GAAhB,GAAsBG,UAHpB;AAIfO,cAAAA,GAAG,EAAE,oBAAC,MAAD;AAAQ,gBAAA,OAAO,EAAE,MAAMtC,YAAY,CAACuC,OAAb,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJU,aAAnB;AAMH,WAPD;;AAQA,cAAIvB,MAAM,KAAK,CAAX,IAAgBA,MAAM,KAAK,CAA/B,EAAkC;AAC9BiB,YAAAA,wBAAwB,CAAC,MAAD,CAAxB;AAEH,WAHD,MAIK,IAAIL,aAAa,CAACa,MAAd,KAAyB,CAA7B,EAAgC;AACjCD,YAAAA,eAAe,CAAC,SAAD,CAAf;AACH,WAFI,MAGA;AACD,iBAAKE,QAAL,CAAc;AACVC,cAAAA,WAAW,EAAE5B;AADH,aAAd;AAGAI,YAAAA,KAAK,CAAC,uDAAD,EAA0D;AAC3DC,cAAAA,MAAM,EAAE,MADmD;AAE3DC,cAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBW,gBAAAA,IAAI,EAAE,SADW;AAEjBU,gBAAAA,IAAI,EAAE7B;AAFW,eAAf;AAFqD,aAA1D,CAAL,CAOKU,IAPL,CAOUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPjB,EAQKF,IARL,CAQUC,GAAG,IAAI;AACT,mBAAKgB,QAAL,CAAc;AACVG,gBAAAA,UAAU,EAAEnB;AADF,eAAd;AAGH,aAZL;AAcH;AACJ,SApDL;AAqDH,OAvDD,CAwDA,OAAOoB,KAAP,EAAc;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH;AACJ,KAnGa;;AAAA,SAqGdG,iBArGc,GAqGOnC,CAAD,IAAO;AACvBiC,MAAAA,OAAO,CAACC,GAAR,CAAYlC,CAAZ;AACA,aAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACJ,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDAAJ,EAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAApB,CADJ,EAEKA,CAAC,CAACoC,SAAF,CAAYrB,GAAZ,CAAgBd,CAAC,IAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKA,CAAC,CAACoC,IAAP,CADmB,EAEnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,oBAAC,MAAD;AAAQ,QAAA,QAAQ,EAAEpC,CAAC,CAACqC,GAApB;AAAyB,QAAA,OAAO,EAAE,MAClC,KAAKC,UAAL,CAAgB,CAAC;AAAEC,UAAAA,MAAM,EAAEvC,CAAC,CAACuC,MAAZ;AAAoBC,UAAAA,QAAQ,EAAExC,CAAC,CAACoC,IAAhC;AAAsCK,UAAAA,cAAc,EAAEzC,CAAC,CAACyC,cAAxD;AAAwEZ,UAAAA,IAAI,EAAE9B,CAAC,CAAC2C,WAAhF;AAA6FC,UAAAA,KAAK,EAAE5C,CAAC,CAAC4C,KAAtG;AAA6GC,UAAAA,OAAO,EAAE7C,CAAC,CAAC6C;AAAxH,SAAD,CAAhB,CADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACuJ5C,CAAC,CAAC6C,IADzJ,CAAJ,CAFmB,CAAtB,CAFL,CADJ,CADI,CAAR;AAYH,KAnHa;;AAAA,SAqHdP,UArHc,GAqHAvC,CAAD,IAAO;AAChB;AACA,WAAK4B,QAAL,CAAc;AACVmB,QAAAA,YAAY,EAAE,IADJ;AAEVR,QAAAA,UAAU,EAAEvC;AAFF,OAAd;AAKH,KA5Ha;;AAAA,SA8HdgD,aA9Hc,GA8HGhD,CAAD,IAAO;AACnBiC,MAAAA,OAAO,CAACC,GAAR,CAAYlC,CAAC,GAAG,GAAJ,GAAU,KAAKiD,KAAL,CAAWV,UAAjC;AACH,KAhIa;;AAAA,SAiIdW,eAjIc,GAiII,MAAM;AACpB,WAAKtB,QAAL,CAAc;AACVmB,QAAAA,YAAY,EAAE;AADJ,OAAd;AAGH,KArIa;;AAAA,SAuIdI,mBAvIc,GAuIQ,MAAM;AACxB,WAAKvB,QAAL,CAAc;AACVmB,QAAAA,YAAY,EAAE;AADJ,OAAd;AAGH,KA3Ia;;AAEV,SAAKE,KAAL,GAAa;AACTG,MAAAA,OAAO,EAAE,EADA;AAETvB,MAAAA,WAAW,EAAE,EAFJ;AAGTE,MAAAA,UAAU,EAAE,EAHH;AAITsB,MAAAA,UAAU,EAAE,EAJH;AAKTd,MAAAA,UAAU,EAAE,EALH;AAMTQ,MAAAA,YAAY,EAAE,KANL;AAOTC,MAAAA,aAAa,EAAE,EAPN;AAQTM,MAAAA,MAAM,EAAE,CAAC;AACLC,QAAAA,KAAK,EAAE,MADF;AACUC,QAAAA,SAAS,EAAE;AADrB,OAAD,EAEL;AACCD,QAAAA,KAAK,EAAE,QADR;AAECC,QAAAA,SAAS,EAAE;AAFZ,OAFK,CARC;AAcTC,MAAAA,SAAS,EAAE,CAAC;AACRF,QAAAA,KAAK,EAAE,SADC;AACUC,QAAAA,SAAS,EAAE;AADrB,OAAD,EAER;AACCD,QAAAA,KAAK,EAAE,OADR;AAECC,QAAAA,SAAS,EAAE;AAFZ,OAFQ;AAdF,KAAb;AAqBH;;AAEDE,EAAAA,iBAAiB,GAAG;AAChBrD,IAAAA,KAAK,CAAC,+CAAD,EAAkD;AACnDC,MAAAA,MAAM,EAAE,MAD2C;AAEnDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBkD,QAAAA,KAAK,EAAE;AADU,OAAf;AAF6C,KAAlD,CAAL,CAKGhD,IALH,CAKQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EALf,EAMKF,IANL,CAMUC,GAAG,IAAI;AACT,WAAKgB,QAAL,CAAc;AACVwB,QAAAA,OAAO,EAAExC;AADC,OAAd;AAGH,KAVL;AAWH;;AAwGDgD,EAAAA,MAAM,GAAG;AACL,WAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACJ,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADI,EAEJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFI,EAGJ,oBAAC,KAAD;AAAO,MAAA,WAAW,MAAlB;AAAmB,MAAA,OAAO,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAC,wDAAZ;AAAwB,MAAA,WAAW,EAAE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEC,UAAAA,QAAQ,EAAE,MAAZ;AAAoBC,UAAAA,KAAK,EAAE;AAA3B,SAAb;AAAqD,QAAA,IAAI,EAAC,QAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAC,4FAAZ;AAA8B,MAAA,WAAW,EAAE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAED,UAAAA,QAAQ,EAAE,MAAZ;AAAoBC,UAAAA,KAAK,EAAE;AAA3B,SAAb;AAAqD,QAAA,IAAI,EAAC,UAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAC,sCAAZ;AAAqB,MAAA,WAAW,EAAE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAED,UAAAA,QAAQ,EAAE;AAAZ,SAAb;AAAmC,QAAA,IAAI,EAAC,WAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CAHI,EAQJ,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE;AAAEE,QAAAA,IAAI,EAAE,EAAR;AAAYC,QAAAA,MAAM,EAAE;AAApB,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAE,MAAhB;AAAwBC,QAAAA,WAAW,EAAE;AAArC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kFADJ,CADJ,EAGI;AAAO,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE,MAAT;AAAiBP,QAAAA,QAAQ,EAAE;AAA3B,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKQ,KAAL,CAAWC,MAAX,CAAkBvD,GAAlB,CAAsBd,CAAC,IAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAC5BA,CAAC,CAACsE,MAD0B,OACjBtE,CAAC,CAACuE,KADe,OACPvE,CAAC,CAACwE,KADK,CAA5B,CAAL,CAFJ,CADJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8FADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKJ,KAAL,CAAWC,MAAX,CAAkBvD,GAAlB,CAAsBd,CAAC,IAAIA,CAAC,CAACyE,GAA7B,CAAL,CAFJ,CAPJ,EAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKL,KAAL,CAAWC,MAAX,CAAkBvD,GAAlB,CAAsBd,CAAC,IAAIA,CAAC,CAAC0E,KAA7B,CAAL,CAFJ,CAXJ,EAeI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKN,KAAL,CAAWC,MAAX,CAAkBvD,GAAlB,CAAsBd,CAAC,IAAIA,CAAC,CAAC2E,KAA7B,CAAL,CAFJ,CAfJ,CAHJ,CADJ,EAyBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzBJ,EA0BI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAAET,QAAAA,SAAS,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8FADJ,CADJ,EAMI,oBAAC,UAAD;AACI,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT,OADX;AAEI,MAAA,QAAQ,EAAE,KAAKrE,UAFnB;AAGI,MAAA,IAAI,EAAE,OAHV;AAII,MAAA,YAAY,EAAEL,YAJlB;AAKI,MAAA,KAAK,EAAEL,MAAM,CAAC,KAAK4D,KAAL,CAAWpB,WAAZ,CALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANJ,CA1BJ,EAwCI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxCJ,EAyCI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAE,KAAKoB,KAAL,CAAWK,MAA3B;AAAmC,MAAA,UAAU,EAAE,KAAKL,KAAL,CAAWlB,UAA1D;AAAsE,MAAA,iBAAiB,EAAE,KAAKI,iBAA9F;AAAiH,MAAA,UAAU,EAAE,KAA7H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAzCJ,CADJ,CARI,EAuDJ,oBAAC,KAAD;AACI,MAAA,KAAK,EAAE,aADX;AAEI,MAAA,OAAO,EAAE,KAAKc,KAAL,CAAWF,YAFxB;AAGI,MAAA,MAAM,EAAE,QAHZ;AAII,MAAA,UAAU,EAAE,QAJhB;AAKI,MAAA,IAAI,EAAE,KAAKG,eALf;AAMI,MAAA,QAAQ,EAAE,KAAKC,mBANnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQI;AAAK,MAAA,KAAK,EAAE;AAAEgB,QAAAA,SAAS,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,MAAD;AACI,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT,OADX;AAEI,MAAA,QAAQ,EAAE,KAAKpB,aAFnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIK,KAAKC,KAAL,CAAWG,OAAX,CAAmBrC,GAAnB,CAAuBd,CAAC,IACrB,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAEA,CAAC,CAAC4E,eAAF,GAAoB,GAApB,GAA0B5E,CAAC,CAAC6E,kBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgE7E,CAAC,CAAC6E,kBAAlE,CADH,CAJL,CADJ,CARJ,CAvDI,CAAR;AA2EH;;AA1N2B;;AA4NhC,MAAMC,IAAI,GAAG9B,KAAK,IAAI;AAClB,SAAO;AACHqB,IAAAA,MAAM,EAAErB,KAAK,CAACqB;AADX,GAAP;AAGH,CAJD;;AAKA,eAAe/E,OAAO,CAACwF,IAAD,CAAP,CAAclF,OAAd,CAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport { Steps, Icon, Card, Select, Col, DatePicker, Button, notification, Table, Modal } from 'antd'\r\nimport moment from 'moment'\r\nimport Logo from '../Components/Logo'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Option = Select.Option;\r\nconst Step = Steps.Step\r\nconst disabledDate = (cur) => {\r\n    return cur < moment().add(+1, 'day') || cur > moment().add(+60, 'day')\r\n}\r\n\r\nclass Massage extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            service: [],\r\n            dateAppoint: [],\r\n            docService: [],\r\n            subService: [],\r\n            selectTime: [],\r\n            serviceModal: false,\r\n            selectService: \"\",\r\n            column: [{\r\n                title: 'name', dataIndex: 'docName'\r\n            }, {\r\n                title: \"วันที่\",\r\n                dataIndex: \"serviceDate\"\r\n            }],\r\n            subColumn: [{\r\n                title: 'เวลานัด', dataIndex: ''\r\n            }, {\r\n                title: \"สถานะ\",\r\n                dataIndex: \"\"\r\n            }]\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(\"http://183.88.219.85:7078/appoint/service.php\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({\r\n                point: 2\r\n            })\r\n        }).then(res => res.json())\r\n            .then(res => {\r\n                this.setState({\r\n                    service: res\r\n                })\r\n            })\r\n    }\r\n\r\n    changeDate = (e, a) => {\r\n        try {\r\n            let dayOff = e._d.getDay()\r\n            fetch(\"http://183.88.219.85:7078/appoint/day_off.php\", {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    datec: a\r\n                })\r\n            })\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                    let dayOffSpacial = res.map(a => a.dayoff_date),\r\n                        dayOffDesc = res.map(a => a.dayoff_name)\r\n                    const openNotificationWithIcon = type => {\r\n                        notification[type]({\r\n                            duration: null,\r\n                            message: 'ไม่สามารถเลือกวันหยุดราชการได้',\r\n                            description: 'กรุณาเลือกวันนัดในวันทำการ',\r\n                            btn: <Button onClick={() => notification.destroy()}>close</Button>\r\n                        })\r\n                    }\r\n                    const dayOff_hospital = type => {\r\n                        notification[type]({\r\n                            duration: null,\r\n                            message: \"ไม่สามารถเลือกวันหยุดราชการได้\",\r\n                            description: dayOffSpacial + \" \" + dayOffDesc,\r\n                            btn: <Button onClick={() => notification.destroy()}>close</Button>\r\n                        })\r\n                    }\r\n                    if (dayOff === 0 || dayOff === 6) {\r\n                        openNotificationWithIcon('warn')\r\n\r\n                    }\r\n                    else if (dayOffSpacial.length !== 0) {\r\n                        dayOff_hospital('warning')\r\n                    }\r\n                    else {\r\n                        this.setState({\r\n                            dateAppoint: a\r\n                        })\r\n                        fetch(\"http://183.88.219.85:7078/appoint/massage_service.php\", {\r\n                            method: \"POST\",\r\n                            body: JSON.stringify({\r\n                                type: 'service',\r\n                                date: a\r\n                            })\r\n                        })\r\n                            .then(res => res.json())\r\n                            .then(res => {\r\n                                this.setState({\r\n                                    docService: res\r\n                                })\r\n                            })\r\n\r\n                    }\r\n                })\r\n        }\r\n        catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    expandedRowRender = (e) => {\r\n        console.log(e)\r\n        return (<div>\r\n            <Card>\r\n                <table>\r\n                    <tr><td>เวลานัด</td><td>สถานะ</td></tr>\r\n                    {e.childrens.map(a => (<tr>\r\n                        <th>{a.time}</th>\r\n                        <th><Button disabled={a.dis} onClick={() =>\r\n                            this.selectTime([{ timeId: a.timeId, timeName: a.time, servicePointId: a.servicePointId, date: e.serviceDate, docId: e.docId, docName: e.docName }])}>{a.stat}</Button></th>\r\n                    </tr>))}\r\n                </table>\r\n            </Card>\r\n        </div>)\r\n    }\r\n\r\n    selectTime = (e) => {\r\n        //console.log(e)\r\n        this.setState({\r\n            serviceModal: true,\r\n            selectTime: e\r\n        })\r\n\r\n    }\r\n\r\n    selectService = (e) => {\r\n        console.log(e + \"-\" + this.state.selectTime)\r\n    }\r\n    selectServiceOk = () => {\r\n        this.setState({\r\n            serviceModal: false\r\n        })\r\n    }\r\n\r\n    selectServiceCancel = () => {\r\n        this.setState({\r\n            serviceModal: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (<div>\r\n            <Logo />\r\n            <br />\r\n            <Steps progressDot current={1} >\r\n                <Step title=\"ลงทะเบียน\" description={<Icon style={{ fontSize: \"25px\", color: \"#3399ff\" }} type=\"idcard\" />} />\r\n                <Step title=\"ทำรายการนัดหมาย\" description={<Icon style={{ fontSize: \"25px\", color: \"#3399ff\" }} type=\"solution\" />} />\r\n                <Step title=\"บันทึก\" description={<Icon style={{ fontSize: \"25px\" }} type=\"file-done\" />} />\r\n            </Steps>\r\n            <Card>\r\n                <Col lg={{ span: 20, offset: 2 }}>\r\n                    <Card style={{ borderRadius: \"20px\", borderColor: \"#3399ff\" }} >\r\n                        <div style={{ textAlign: \"center\" }}>\r\n                            <h2>ข้อมูลผู้ใช้</h2></div>\r\n                        <table style={{ width: \"100%\", fontSize: \"18px\" }}>\r\n                            <tr>\r\n                                <td>ชื่อ-สกุล</td>\r\n                                <td>{this.props.person.map(a => (<div>\r\n                                    {a.prefix} {a.fname} {a.lname}\r\n                                </div>))}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>เลขบัตรประชาชน</td>\r\n                                <td>{this.props.person.map(a => a.cid)}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>วันเกิด</td>\r\n                                <td>{this.props.person.map(a => a.birth)}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>สิทธิ์</td>\r\n                                <td>{this.props.person.map(a => a.plans)}</td>\r\n                            </tr>\r\n                        </table>\r\n                    </Card>\r\n                    <br />\r\n                    <Card>\r\n                        <div style={{ textAlign: \"center\" }}>\r\n                            <h2>\r\n                                นัดแพทย์แผนไทย\r\n                            </h2>\r\n                        </div>\r\n                        <DatePicker\r\n                            style={{ width: \"100%\" }}\r\n                            onChange={this.changeDate}\r\n                            size={\"large\"}\r\n                            disabledDate={disabledDate}\r\n                            value={moment(this.state.dateAppoint)}\r\n                        />\r\n                    </Card>\r\n                    <br />\r\n                    <Card>\r\n                        <Table columns={this.state.column} dataSource={this.state.docService} expandedRowRender={this.expandedRowRender} pagination={false} />\r\n                    </Card>\r\n                </Col>\r\n            </Card>\r\n            <Modal\r\n                title={\"เลือกบริการ\"}\r\n                visible={this.state.serviceModal}\r\n                okText={\"ยืนยัน\"}\r\n                cancelText={\"ยกเลิก\"}\r\n                onOk={this.selectServiceOk}\r\n                onCancel={this.selectServiceCancel}\r\n            >\r\n                <div style={{ textAlign: \"center\" }}>\r\n                    <Select\r\n                        style={{ width: \"200px\" }}\r\n                        onSelect={this.selectService}\r\n                    >\r\n                        {this.state.service.map(a => (\r\n                            <Option value={a.service_name_id + \"/\" + a.service_name_order}>{a.service_name_order}</Option>\r\n                        ))}\r\n                    </Select>\r\n                </div>\r\n            </Modal>\r\n        </div>)\r\n    }\r\n}\r\nconst data = state => {\r\n    return {\r\n        person: state.person\r\n    }\r\n}\r\nexport default connect(data)(Massage)"]},"metadata":{},"sourceType":"module"}