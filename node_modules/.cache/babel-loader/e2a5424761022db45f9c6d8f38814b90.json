{"ast":null,"code":"var _jsxFileName = \"I:\\\\ANYcode\\\\react\\\\samroiyod_next-app\\\\src\\\\Components\\\\Monitor.jsx\";\nimport React, { Component } from 'react';\nimport { CookiesProvider, withCookies } from 'react-cookie';\nimport { Card, Input, Button, Col, message, Select, DatePicker } from 'antd';\nimport AES from 'crypto-js/aes';\nimport base64 from 'crypto-js/enc-base64';\nimport CryptoJS from 'crypto-js';\nimport moment from 'moment';\nconst Option = Select.Option;\n\nclass Monitor extends Component {\n  constructor() {\n    super();\n\n    this.Login = () => {\n      const cookies = this.props.cookies;\n      cookies.remove('user');\n      cookies.remove('pass');\n      let user = document.getElementById('user').value,\n          pass = document.getElementById('pass').value;\n      user = CryptoJS.enc.Utf8.parse(user);\n      user = CryptoJS.enc.Base64.stringify(user);\n      pass = CryptoJS.enc.Utf8.parse(pass);\n      pass = CryptoJS.enc.Base64.stringify(pass);\n      cookies.set('user', user);\n      cookies.set('pass', pass); //console.log(this.props.cookies.cookies)\n\n      fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          user: user,\n          pass: pass\n        })\n      }).then(res => res.json()).then(res => {\n        let checkLogin = res.map(a => a.stat).toString();\n\n        if (checkLogin === \"1\") {\n          message.success('success');\n          this.setState({\n            checkLogin: checkLogin,\n            empoye: res\n          });\n        } else {\n          message.error('username or password');\n          this.setState({\n            checkLogin: checkLogin\n          });\n        }\n      });\n    };\n\n    this.delCook = () => {\n      const cookies = this.props.cookies;\n      cookies.remove('user');\n      cookies.remove('pass');\n    };\n\n    this.dateChange = (a, b) => {\n      console.log(b);\n      this.setState({\n        selectDate: b\n      });\n    };\n\n    this.pointChange = e => {\n      console.log(e);\n      this.setState({\n        selectPoint: e\n      });\n    };\n\n    this.state = {\n      empoye: [],\n      checkLogin: \"\",\n      selectDate: \"\",\n      selectPoint: \"\"\n    };\n  }\n\n  componentDidMount() {\n    let date = new Date();\n    date = \"\".concat(date.getFullYear(), \"-\").concat(\"0\" + (date.getMonth() + 1).slice(-2), \"-\").concat(date.getDate());\n    console.log(date);\n    this.setState({\n      selectDate: date\n    });\n    const cookies = this.props.cookies;\n\n    if (cookies.get('user') === undefined && cookies.get('pass') === undefined) {\n      console.log(\"u\");\n    } else {\n      fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          user: cookies.get('user'),\n          pass: cookies.get('pass')\n        })\n      }).then(res => res.json()).then(res => {\n        let checkLogin = res.map(a => a.stat).toString();\n        this.setState({\n          checkLogin: checkLogin,\n          empoye: res\n        });\n      });\n    }\n  }\n\n  componentWillReceiveProps() {\n    const cookies = this.props.cookies; //console.log(cookies)\n\n    fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        user: cookies.get('user'),\n        pass: cookies.get('pass')\n      })\n    }).then(res => res.json()).then(res => {\n      let checkLogin = res.map(a => a.stat).toString();\n      this.setState({\n        checkLogin: checkLogin,\n        empoye: res\n      });\n    });\n  }\n\n  render() {\n    let checkLogin = this.state.checkLogin;\n\n    if (checkLogin === \"\" || checkLogin === \"0\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: {\n          span: 10,\n          offset: 7\n        },\n        style: {\n          padding: \"100px 0px 0px 0px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Appointment_Login\"), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"UserName:\"), React.createElement(Input, {\n        id: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Password:\"), React.createElement(Input, {\n        id: \"pass\",\n        type: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(Button, {\n        block: true,\n        size: \"large\",\n        type: \"primary\",\n        onClick: this.Login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"LOGIN\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(Button, {\n        block: true,\n        size: \"large\",\n        type: \"danger\",\n        onClick: this.delCook,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"LOGOUT\"))));\n    } else if (checkLogin === \"1\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(CookiesProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Button, {\n        block: true,\n        size: \"large\",\n        type: \"danger\",\n        onClick: this.delCook,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"LOGOUT\"), React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E19\\u0E31\\u0E14\\u0E2D\\u0E2D\\u0E19\\u0E44\\u0E25\\u0E19\\u0E4C\"), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"\\u0E08\\u0E38\\u0E14\\u0E1A\\u0E23\\u0E34\\u0E01\\u0E32\\u0E23 :\", \" \", React.createElement(Select, {\n        showSearch: true,\n        style: {\n          width: 800\n        },\n        placeholder: \"Select a person\",\n        optionFilterProp: \"children\",\n        onChange: this.pointChange,\n        filterOption: (input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Option, {\n        value: \"jack\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Jack\"), React.createElement(Option, {\n        value: \"lucy\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"Lucy\"), React.createElement(Option, {\n        value: \"tom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Tom\")), \" \", \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 :\", \" \", React.createElement(DatePicker, {\n        value: moment(this.state.selectDate),\n        style: {\n          width: 'auto'\n        },\n        onChange: this.dateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }))))));\n    }\n  }\n\n}\n\nexport default withCookies(Monitor);","map":{"version":3,"sources":["I:\\ANYcode\\react\\samroiyod_next-app\\src\\Components\\Monitor.jsx"],"names":["React","Component","CookiesProvider","withCookies","Card","Input","Button","Col","message","Select","DatePicker","AES","base64","CryptoJS","moment","Option","Monitor","constructor","Login","cookies","props","remove","user","document","getElementById","value","pass","enc","Utf8","parse","Base64","stringify","set","fetch","method","body","JSON","then","res","json","checkLogin","map","a","stat","toString","success","setState","empoye","error","delCook","dateChange","b","console","log","selectDate","pointChange","e","selectPoint","state","componentDidMount","date","Date","getFullYear","getMonth","slice","getDate","get","undefined","componentWillReceiveProps","render","span","offset","padding","textAlign","width","input","option","children","toLowerCase","indexOf"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,eAAT,EAA0BC,WAA1B,QAA6C,cAA7C;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,MAAtB,EAA8BC,GAA9B,EAAmCC,OAAnC,EAA4CC,MAA5C,EAAoDC,UAApD,QAAsE,MAAtE;AACA,OAAOC,GAAP,MAAgB,eAAhB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,MAAP,MAAmB,QAAnB;MACQC,M,GAAWN,M,CAAXM,M;;AAER,MAAMC,OAAN,SAAsBf,SAAtB,CAAgC;AAC5BgB,EAAAA,WAAW,GAAG;AACV;;AADU,SA4DdC,KA5Dc,GA4DN,MAAM;AAAA,YACFC,OADE,GACU,KAAKC,KADf,CACFD,OADE;AAEVA,MAAAA,OAAO,CAACE,MAAR,CAAe,MAAf;AACAF,MAAAA,OAAO,CAACE,MAAR,CAAe,MAAf;AACA,UAAIC,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,KAA3C;AAAA,UACIC,IAAI,GAAGH,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,KAD3C;AAGAH,MAAAA,IAAI,GAAGT,QAAQ,CAACc,GAAT,CAAaC,IAAb,CAAkBC,KAAlB,CAAwBP,IAAxB,CAAP;AACAA,MAAAA,IAAI,GAAGT,QAAQ,CAACc,GAAT,CAAaG,MAAb,CAAoBC,SAApB,CAA8BT,IAA9B,CAAP;AACAI,MAAAA,IAAI,GAAGb,QAAQ,CAACc,GAAT,CAAaC,IAAb,CAAkBC,KAAlB,CAAwBH,IAAxB,CAAP;AACAA,MAAAA,IAAI,GAAGb,QAAQ,CAACc,GAAT,CAAaG,MAAb,CAAoBC,SAApB,CAA8BL,IAA9B,CAAP;AAEAP,MAAAA,OAAO,CAACa,GAAR,CAAY,MAAZ,EAAoBV,IAApB;AACAH,MAAAA,OAAO,CAACa,GAAR,CAAY,MAAZ,EAAoBN,IAApB,EAbU,CAcV;;AAEAO,MAAAA,KAAK,CAAC,6CAAD,EAAgD;AACjDC,QAAAA,MAAM,EAAE,MADyC;AAEjDC,QAAAA,IAAI,EAAEC,IAAI,CAACL,SAAL,CAAe;AACjBT,UAAAA,IAAI,EAAEA,IADW;AAEjBI,UAAAA,IAAI,EAAEA;AAFW,SAAf;AAF2C,OAAhD,CAAL,CAOKW,IAPL,CAOUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPjB,EAQKF,IARL,CAQUC,GAAG,IAAI;AACT,YAAIE,UAAU,GAAGF,GAAG,CAACG,GAAJ,CAAQC,CAAC,IAAIA,CAAC,CAACC,IAAf,EAAqBC,QAArB,EAAjB;;AACA,YAAIJ,UAAU,KAAK,GAAnB,EAAwB;AACpBhC,UAAAA,OAAO,CAACqC,OAAR,CAAgB,SAAhB;AACA,eAAKC,QAAL,CAAc;AACVN,YAAAA,UAAU,EAAEA,UADF;AAEVO,YAAAA,MAAM,EAAET;AAFE,WAAd;AAIH,SAND,MAMO;AACH9B,UAAAA,OAAO,CAACwC,KAAR,CAAc,sBAAd;AACA,eAAKF,QAAL,CAAc;AACVN,YAAAA,UAAU,EAAEA;AADF,WAAd;AAGH;AACJ,OAtBL;AAuBH,KAnGa;;AAAA,SAqGdS,OArGc,GAqGJ,MAAM;AAAA,YACJ9B,OADI,GACQ,KAAKC,KADb,CACJD,OADI;AAEZA,MAAAA,OAAO,CAACE,MAAR,CAAe,MAAf;AACAF,MAAAA,OAAO,CAACE,MAAR,CAAe,MAAf;AACH,KAzGa;;AAAA,SA2Gd6B,UA3Gc,GA2GD,CAACR,CAAD,EAAIS,CAAJ,KAAU;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACA,WAAKL,QAAL,CAAc;AACVQ,QAAAA,UAAU,EAAEH;AADF,OAAd;AAGH,KAhHa;;AAAA,SAkHdI,WAlHc,GAkHCC,CAAD,IAAO;AACjBJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,CAAZ;AACA,WAAKV,QAAL,CAAc;AACVW,QAAAA,WAAW,EAAED;AADH,OAAd;AAGH,KAvHa;;AAEV,SAAKE,KAAL,GAAa;AACTX,MAAAA,MAAM,EAAE,EADC;AAETP,MAAAA,UAAU,EAAE,EAFH;AAGTc,MAAAA,UAAU,EAAE,EAHH;AAITG,MAAAA,WAAW,EAAE;AAJJ,KAAb;AAMH;;AAEDE,EAAAA,iBAAiB,GAAG;AAChB,QAAIC,IAAI,GAAG,IAAIC,IAAJ,EAAX;AACAD,IAAAA,IAAI,aAAMA,IAAI,CAACE,WAAL,EAAN,cAA4B,MAAM,CAACF,IAAI,CAACG,QAAL,KAAkB,CAAnB,EAAsBC,KAAtB,CAA4B,CAAC,CAA7B,CAAlC,cAAqEJ,IAAI,CAACK,OAAL,EAArE,CAAJ;AAEAb,IAAAA,OAAO,CAACC,GAAR,CAAYO,IAAZ;AACA,SAAKd,QAAL,CAAc;AACVQ,MAAAA,UAAU,EAAEM;AADF,KAAd;AALgB,UAQRzC,OARQ,GAQI,KAAKC,KART,CAQRD,OARQ;;AAShB,QAAIA,OAAO,CAAC+C,GAAR,CAAY,MAAZ,MAAwBC,SAAxB,IAAqChD,OAAO,CAAC+C,GAAR,CAAY,MAAZ,MAAwBC,SAAjE,EAA4E;AACxEf,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACH,KAFD,MAGK;AACDpB,MAAAA,KAAK,CAAC,6CAAD,EAAgD;AACjDC,QAAAA,MAAM,EAAE,MADyC;AAEjDC,QAAAA,IAAI,EAAEC,IAAI,CAACL,SAAL,CAAe;AACjBT,UAAAA,IAAI,EAAEH,OAAO,CAAC+C,GAAR,CAAY,MAAZ,CADW;AAEjBxC,UAAAA,IAAI,EAAEP,OAAO,CAAC+C,GAAR,CAAY,MAAZ;AAFW,SAAf;AAF2C,OAAhD,CAAL,CAOK7B,IAPL,CAOUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPjB,EAQKF,IARL,CAQUC,GAAG,IAAI;AACT,YAAIE,UAAU,GAAGF,GAAG,CAACG,GAAJ,CAAQC,CAAC,IAAIA,CAAC,CAACC,IAAf,EAAqBC,QAArB,EAAjB;AACA,aAAKE,QAAL,CAAc;AACVN,UAAAA,UAAU,EAAEA,UADF;AAEVO,UAAAA,MAAM,EAAET;AAFE,SAAd;AAIH,OAdL;AAeH;AACJ;;AAED8B,EAAAA,yBAAyB,GAAG;AAAA,UAChBjD,OADgB,GACJ,KAAKC,KADD,CAChBD,OADgB,EAExB;;AACAc,IAAAA,KAAK,CAAC,6CAAD,EAAgD;AACjDC,MAAAA,MAAM,EAAE,MADyC;AAEjDC,MAAAA,IAAI,EAAEC,IAAI,CAACL,SAAL,CAAe;AACjBT,QAAAA,IAAI,EAAEH,OAAO,CAAC+C,GAAR,CAAY,MAAZ,CADW;AAEjBxC,QAAAA,IAAI,EAAEP,OAAO,CAAC+C,GAAR,CAAY,MAAZ;AAFW,OAAf;AAF2C,KAAhD,CAAL,CAMG7B,IANH,CAMQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EANf,EAOKF,IAPL,CAOUC,GAAG,IAAI;AACT,UAAIE,UAAU,GAAGF,GAAG,CAACG,GAAJ,CAAQC,CAAC,IAAIA,CAAC,CAACC,IAAf,EAAqBC,QAArB,EAAjB;AACA,WAAKE,QAAL,CAAc;AACVN,QAAAA,UAAU,EAAEA,UADF;AAEVO,QAAAA,MAAM,EAAET;AAFE,OAAd;AAIH,KAbL;AAcH;;AA+DD+B,EAAAA,MAAM,GAAG;AACL,QAAI7B,UAAU,GAAG,KAAKkB,KAAL,CAAWlB,UAA5B;;AACA,QAAIA,UAAU,KAAK,EAAf,IAAqBA,UAAU,KAAK,GAAxC,EAA6C;AACzC,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE;AAAE8B,UAAAA,IAAI,EAAE,EAAR;AAAYC,UAAAA,MAAM,EAAE;AAApB,SAAT;AAAkC,QAAA,KAAK,EAAE;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE;AAAb,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFJ,EAGI,oBAAC,KAAD;AAAO,QAAA,EAAE,EAAC,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJJ,EAKI,oBAAC,KAAD;AAAO,QAAA,EAAE,EAAC,MAAV;AAAiB,QAAA,IAAI,EAAC,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPJ,EAQI,oBAAC,MAAD;AAAQ,QAAA,KAAK,MAAb;AAAc,QAAA,IAAI,EAAC,OAAnB;AAA2B,QAAA,IAAI,EAAC,SAAhC;AAA0C,QAAA,OAAO,EAAE,KAAKvD,KAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBARJ,EASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATJ,EAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVJ,EAWI,oBAAC,MAAD;AAAQ,QAAA,KAAK,MAAb;AAAc,QAAA,IAAI,EAAC,OAAnB;AAA2B,QAAA,IAAI,EAAC,QAAhC;AAAyC,QAAA,OAAO,EAAE,KAAK+B,OAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXJ,CADJ,CADJ,CADJ;AAmBH,KApBD,MAqBK,IAAIT,UAAU,KAAK,GAAnB,EAAwB;AACzB,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AAAQ,QAAA,KAAK,MAAb;AAAc,QAAA,IAAI,EAAC,OAAnB;AAA2B,QAAA,IAAI,EAAC,QAAhC;AAAyC,QAAA,OAAO,EAAE,KAAKS,OAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAEI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,KAAK,EAAE;AAAEwB,UAAAA,SAAS,EAAE;AAAb,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gGADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qEACgB,GADhB,EAEI,oBAAC,MAAD;AACI,QAAA,UAAU,MADd;AAEI,QAAA,KAAK,EAAE;AAAEC,UAAAA,KAAK,EAAE;AAAT,SAFX;AAGI,QAAA,WAAW,EAAC,iBAHhB;AAII,QAAA,gBAAgB,EAAC,UAJrB;AAKI,QAAA,QAAQ,EAAE,KAAKnB,WALnB;AAMI,QAAA,YAAY,EAAE,CAACoB,KAAD,EAAQC,MAAR,KACVA,MAAM,CAACxD,KAAP,CAAayD,QAAb,CAAsBC,WAAtB,GAAoCC,OAApC,CAA4CJ,KAAK,CAACG,WAAN,EAA5C,KAAoE,CAP5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAUI,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVJ,EAWI,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXJ,EAYI,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAZJ,CAFJ,EAgBK,GAhBL,4CAiBa,GAjBb,EAkBI,oBAAC,UAAD;AACI,QAAA,KAAK,EAAEhE,MAAM,CAAC,KAAK4C,KAAL,CAAWJ,UAAZ,CADjB;AAEI,QAAA,KAAK,EAAE;AAAEoB,UAAAA,KAAK,EAAE;AAAT,SAFX;AAGI,QAAA,QAAQ,EAAE,KAAKxB,UAHnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAlBJ,CAFJ,CAFJ,CADJ,CADJ,CADJ;AAmCH;AACJ;;AAtL2B;;AAyLhC,eAAe/C,WAAW,CAACa,OAAD,CAA1B","sourcesContent":["import React, { Component } from 'react'\r\nimport { CookiesProvider, withCookies } from 'react-cookie'\r\nimport { Card, Input, Button, Col, message, Select, DatePicker } from 'antd'\r\nimport AES from 'crypto-js/aes'\r\nimport base64 from 'crypto-js/enc-base64'\r\nimport CryptoJS from 'crypto-js'\r\nimport moment from 'moment'\r\nconst { Option } = Select;\r\n\r\nclass Monitor extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            empoye: [],\r\n            checkLogin: \"\",\r\n            selectDate: \"\",\r\n            selectPoint: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        let date = new Date()\r\n        date = `${date.getFullYear()}-${\"0\" + (date.getMonth() + 1).slice(-2)}-${date.getDate()}`\r\n\r\n        console.log(date)\r\n        this.setState({\r\n            selectDate: date\r\n        })\r\n        const { cookies } = this.props;\r\n        if (cookies.get('user') === undefined && cookies.get('pass') === undefined) {\r\n            console.log(\"u\")\r\n        }\r\n        else {\r\n            fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    user: cookies.get('user'),\r\n                    pass: cookies.get('pass')\r\n                })\r\n            })\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                    let checkLogin = res.map(a => a.stat).toString()\r\n                    this.setState({\r\n                        checkLogin: checkLogin,\r\n                        empoye: res\r\n                    })\r\n                })\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps() {\r\n        const { cookies } = this.props;\r\n        //console.log(cookies)\r\n        fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({\r\n                user: cookies.get('user'),\r\n                pass: cookies.get('pass')\r\n            })\r\n        }).then(res => res.json())\r\n            .then(res => {\r\n                let checkLogin = res.map(a => a.stat).toString()\r\n                this.setState({\r\n                    checkLogin: checkLogin,\r\n                    empoye: res\r\n                })\r\n            })\r\n    }\r\n\r\n    Login = () => {\r\n        const { cookies } = this.props;\r\n        cookies.remove('user')\r\n        cookies.remove('pass')\r\n        let user = document.getElementById('user').value,\r\n            pass = document.getElementById('pass').value\r\n\r\n        user = CryptoJS.enc.Utf8.parse(user)\r\n        user = CryptoJS.enc.Base64.stringify(user)\r\n        pass = CryptoJS.enc.Utf8.parse(pass)\r\n        pass = CryptoJS.enc.Base64.stringify(pass)\r\n\r\n        cookies.set('user', user)\r\n        cookies.set('pass', pass)\r\n        //console.log(this.props.cookies.cookies)\r\n\r\n        fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({\r\n                user: user,\r\n                pass: pass\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                let checkLogin = res.map(a => a.stat).toString()\r\n                if (checkLogin === \"1\") {\r\n                    message.success('success')\r\n                    this.setState({\r\n                        checkLogin: checkLogin,\r\n                        empoye: res\r\n                    })\r\n                } else {\r\n                    message.error('username or password')\r\n                    this.setState({\r\n                        checkLogin: checkLogin\r\n                    })\r\n                }\r\n            })\r\n    }\r\n\r\n    delCook = () => {\r\n        const { cookies } = this.props;\r\n        cookies.remove('user')\r\n        cookies.remove('pass')\r\n    }\r\n\r\n    dateChange = (a, b) => {\r\n        console.log(b)\r\n        this.setState({\r\n            selectDate: b\r\n        })\r\n    }\r\n\r\n    pointChange = (e) => {\r\n        console.log(e)\r\n        this.setState({\r\n            selectPoint: e\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let checkLogin = this.state.checkLogin\r\n        if (checkLogin === \"\" || checkLogin === \"0\") {\r\n            return (\r\n                <div>\r\n                    <Col lg={{ span: 10, offset: 7 }} style={{ padding: \"100px 0px 0px 0px\" }}>\r\n                        <Card>\r\n                            <h1 style={{ textAlign: \"center\" }}>Appointment_Login</h1>\r\n                            <h2>UserName:</h2>\r\n                            <Input id=\"user\" />\r\n                            <h2>Password:</h2>\r\n                            <Input id=\"pass\" type=\"password\" />\r\n                            <br />\r\n                            <br />\r\n                            <Button block size=\"large\" type=\"primary\" onClick={this.Login} >LOGIN</Button>\r\n                            <br />\r\n                            <br />\r\n                            <Button block size=\"large\" type=\"danger\" onClick={this.delCook} >LOGOUT</Button>\r\n                        </Card>\r\n                    </Col>\r\n                </div>\r\n            )\r\n        }\r\n        else if (checkLogin === \"1\") {\r\n            return (\r\n                <div>\r\n                    <CookiesProvider>\r\n                        <div>\r\n                            <Button block size=\"large\" type=\"danger\" onClick={this.delCook} >LOGOUT</Button>\r\n                            <Card>\r\n                                <h1 style={{ textAlign: \"center\" }}>ระบบนัดออนไลน์</h1>\r\n                                <h3>\r\n                                    จุดบริการ :{\" \"}\r\n                                    <Select\r\n                                        showSearch\r\n                                        style={{ width: 800 }}\r\n                                        placeholder=\"Select a person\"\r\n                                        optionFilterProp=\"children\"\r\n                                        onChange={this.pointChange}\r\n                                        filterOption={(input, option) =>\r\n                                            option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                        }\r\n                                    >\r\n                                        <Option value=\"jack\">Jack</Option>\r\n                                        <Option value=\"lucy\">Lucy</Option>\r\n                                        <Option value=\"tom\">Tom</Option>\r\n                                    </Select>\r\n                                    {\" \"}\r\n                                    วันที่ :{\" \"}\r\n                                    <DatePicker\r\n                                        value={moment(this.state.selectDate)}\r\n                                        style={{ width: 'auto' }}\r\n                                        onChange={this.dateChange} />\r\n                                </h3>\r\n                            </Card>\r\n                        </div>\r\n                    </CookiesProvider>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default withCookies(Monitor)"]},"metadata":{},"sourceType":"module"}