{"ast":null,"code":"var _jsxFileName = \"I:\\\\ANYcode\\\\react\\\\samroiyod_next-app\\\\src\\\\Components\\\\Monitor.jsx\";\nimport React, { Component } from 'react';\nimport { CookiesProvider, withCookies } from 'react-cookie';\nimport { Card, Modal, Input, Button, Col, message, Select, DatePicker, Row, Table } from 'antd';\nimport AES from 'crypto-js/aes';\nimport base64 from 'crypto-js/enc-base64';\nimport CryptoJS from 'crypto-js';\nimport moment from 'moment';\nconst Option = Select.Option;\n\nclass Monitor extends Component {\n  constructor() {\n    super();\n\n    this.Login = () => {\n      const cookies = this.props.cookies;\n      cookies.remove('user');\n      cookies.remove('pass');\n      let user = document.getElementById('user').value,\n          pass = document.getElementById('pass').value;\n      user = CryptoJS.enc.Utf8.parse(user);\n      user = CryptoJS.enc.Base64.stringify(user);\n      pass = CryptoJS.enc.Utf8.parse(pass);\n      pass = CryptoJS.enc.Base64.stringify(pass);\n      cookies.set('user', user);\n      cookies.set('pass', pass); //console.log(this.props.cookies.cookies)\n\n      fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          user: user,\n          pass: pass\n        })\n      }).then(res => res.json()).then(res => {\n        let checkLogin = res.map(a => a.stat).toString();\n\n        if (checkLogin === \"1\") {\n          message.success('success');\n          this.setState({\n            checkLogin: checkLogin,\n            empoye: res\n          });\n        } else {\n          message.error('username or password');\n          this.setState({\n            checkLogin: checkLogin\n          });\n        }\n      });\n    };\n\n    this.delCook = () => {\n      const cookies = this.props.cookies;\n      cookies.remove('user');\n      cookies.remove('pass');\n    };\n\n    this.dateChange = (a, b) => {\n      console.log(b);\n      this.setState({\n        selectDate: b\n      });\n      fetch(\"http://183.88.219.85:7078/appoint/view_appoint.php\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          dates: b,\n          point: this.state.selectPoint\n        })\n      }).then(view => view.json()).then(view => {\n        this.setState({\n          view: view\n        });\n      });\n    };\n\n    this.pointChange = e => {\n      console.log(e);\n      this.setState({\n        selectPoint: e\n      });\n      fetch(\"http://183.88.219.85:7078/appoint/view_appoint.php\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          dates: this.state.selectDate,\n          point: e\n        })\n      }).then(view => view.json()).then(view => {\n        this.setState({\n          view: view\n        });\n      });\n    };\n\n    this.Edits = e => {\n      console.log(e);\n      this.setState({\n        modal: true\n      });\n      fetch(\"http://183.88.219.85:7078/appoint/view_edit.php\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          id: e\n        })\n      }).then(view_edit => view_edit.json()).then(view_edit => {\n        this.setState({\n          dataEdit: view_edit\n        });\n      });\n    };\n\n    this.modalOk = () => {\n      this.setState({\n        modal: false\n      });\n    };\n\n    this.modalCancal = () => {\n      this.setState({\n        modal: false\n      });\n    };\n\n    this.state = {\n      modal: false,\n      point: [],\n      dataEdit: [],\n      empoye: [],\n      checkLogin: \"\",\n      selectDate: \"\",\n      selectPoint: [],\n      view: [],\n      colums: [{\n        title: \"วันที่รับบริการ\",\n        dataIndex: \"service_date\"\n      }, {\n        title: \"เวลานัด\",\n        dataIndex: \"time_point_name\"\n      }, {\n        title: \"HN\",\n        dataIndex: \"service_hn\"\n      }, {\n        title: \"ชื่อ-สกุล\",\n        dataIndex: \"pname\"\n      }, {\n        title: \"อายุ\",\n        dataIndex: \"person_age\"\n      }, {\n        title: \"เบอร์ติดต่อ\",\n        dataIndex: \"person_phone\"\n      }, {\n        title: \"จุดรับบริการ\",\n        dataIndex: \"point_name\"\n      }, {\n        title: \"บริการ\",\n        dataIndex: \"service_name_order\"\n      }, {\n        title: \"แก้ไข\",\n        dataIndex: \"service_id\",\n        render: service_id => React.createElement(Button, {\n          onClick: () => this.Edits(service_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, \" \\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\")\n      }],\n      editColum: [{\n        title: \"HN\",\n        dataIndex: \"service_hn\"\n      }, {\n        title: \"ชื่อ\",\n        dataIndex: \"pname\"\n      }, {\n        title: \"วันที่นัด\",\n        dataIndex: \"service_date\",\n        render: service_date => React.createElement(DatePicker, {\n          value: moment(service_date),\n          style: {\n            width: 'auto'\n          },\n          onChange: this.dateChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        })\n      }, {\n        title: \"เวลานัด\",\n        dataIndex: \"time_point_id\",\n        render: time_point_id => React.createElement(Select, {\n          showSearch: true,\n          style: {\n            width: \"auto\"\n          },\n          placeholder: \"Select a point\",\n          value: this.state.selectPoint,\n          optionFilterProp: \"children\",\n          onChange: this.pointChange,\n          filterOption: (input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(Option, {\n          value: time_point_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, time_point_name))\n      }, {\n        title: \"ลบ\",\n        dataIndex: \"del\"\n      }]\n    };\n  }\n\n  componentDidMount() {\n    let date = new Date();\n    date = \"\".concat(date.getFullYear(), \"-\").concat((\"0\" + (date.getMonth() + 1)).slice(-2), \"-\").concat(date.getDate()); //console.log(date)\n\n    this.setState({\n      selectDate: date\n    });\n    const cookies = this.props.cookies;\n\n    if (cookies.get('user') === undefined && cookies.get('pass') === undefined) {\n      console.log(\"u\");\n    } else {\n      fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          user: cookies.get('user'),\n          pass: cookies.get('pass')\n        })\n      }).then(res => res.json()).then(res => {\n        let checkLogin = res.map(a => a.stat).toString();\n        this.setState({\n          checkLogin: checkLogin,\n          empoye: res,\n          selectPoint: Number(res.map(a => a.point))\n        });\n      });\n      fetch(\"http://183.88.219.85:7078/appoint/service_point.php\").then(res1 => res1.json()).then(res1 => {\n        this.setState({\n          point: res1\n        });\n      });\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    console.log(this.props);\n    const cookies = this.props.cookies; //console.log(cookies)\n\n    fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        user: cookies.get('user'),\n        pass: cookies.get('pass')\n      })\n    }).then(res => res.json()).then(res => {\n      let checkLogin = res.map(a => a.stat).toString();\n      this.setState({\n        checkLogin: checkLogin,\n        empoye: res,\n        selectPoint: Number(res.map(a => a.point))\n      });\n      fetch(\"http://183.88.219.85:7078/appoint/view_appoint.php\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          dates: this.state.selectDate,\n          point: this.state.selectPoint\n        })\n      }).then(view => view.json()).then(view => {\n        this.setState({\n          view: view\n        });\n      });\n    });\n  }\n\n  render() {\n    let checkLogin = this.state.checkLogin;\n\n    if (checkLogin === \"\" || checkLogin === \"0\") {\n      return React.createElement(CookiesProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: {\n          span: 10,\n          offset: 7\n        },\n        style: {\n          padding: \"100px 0px 0px 0px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, \"Appointment_Login\"), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, \"UserName:\"), React.createElement(Input, {\n        id: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, \"Password:\"), React.createElement(Input, {\n        id: \"pass\",\n        type: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }), React.createElement(Button, {\n        block: true,\n        size: \"large\",\n        type: \"primary\",\n        onClick: this.Login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"LOGIN\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }), React.createElement(Button, {\n        block: true,\n        size: \"large\",\n        type: \"danger\",\n        onClick: this.delCook,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, \"LOGOUT\")))));\n    } else if (checkLogin === \"1\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(CookiesProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, this.state.empoye.map(a => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: {\n          span: 24\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: {\n          span: 19\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: {\n          textAlign: \"left\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, \"\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E19\\u0E31\\u0E14\\u0E2D\\u0E2D\\u0E19\\u0E44\\u0E25\\u0E19\\u0E4C\")), React.createElement(Col, {\n        lg: {\n          span: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        style: {\n          textAlign: \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, \"\".concat(a.person_firstname, \" \").concat(a.person_lastname, \" \"), \" \", React.createElement(Button, {\n        style: {\n          width: \"50\"\n        },\n        type: \"danger\",\n        onClick: this.delCook,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, \"LOGOUT\"))))))), React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, \"\\u0E23\\u0E32\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\"), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, \"\\u0E08\\u0E38\\u0E14\\u0E1A\\u0E23\\u0E34\\u0E01\\u0E32\\u0E23 :\", \" \", React.createElement(Select, {\n        showSearch: true,\n        style: {\n          width: 800\n        },\n        placeholder: \"Select a point\",\n        value: this.state.selectPoint,\n        optionFilterProp: \"children\",\n        onChange: this.pointChange,\n        filterOption: (input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, this.state.point.map(a => React.createElement(Option, {\n        value: a.point_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, a.point_name))), \" \", \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 :\", \" \", React.createElement(DatePicker, {\n        value: moment(this.state.selectDate),\n        style: {\n          width: 'auto'\n        },\n        onChange: this.dateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }))), React.createElement(Table, {\n        columns: this.state.colums,\n        dataSource: this.state.view,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        title: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\",\n        okText: \"บันทึกการแก้ไข\",\n        cancelText: \"ปิด\",\n        visible: this.state.modal,\n        onOk: this.modalOk,\n        onCancel: this.modalCancal,\n        width: \"70%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, React.createElement(Table, {\n        columns: this.state.editColum,\n        dataSource: this.state.dataEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      })))));\n    }\n  }\n\n}\n\nexport default withCookies(Monitor);","map":{"version":3,"sources":["I:\\ANYcode\\react\\samroiyod_next-app\\src\\Components\\Monitor.jsx"],"names":["React","Component","CookiesProvider","withCookies","Card","Modal","Input","Button","Col","message","Select","DatePicker","Row","Table","AES","base64","CryptoJS","moment","Option","Monitor","constructor","Login","cookies","props","remove","user","document","getElementById","value","pass","enc","Utf8","parse","Base64","stringify","set","fetch","method","body","JSON","then","res","json","checkLogin","map","a","stat","toString","success","setState","empoye","error","delCook","dateChange","b","console","log","selectDate","dates","point","state","selectPoint","view","pointChange","e","Edits","modal","id","view_edit","dataEdit","modalOk","modalCancal","colums","title","dataIndex","render","service_id","editColum","service_date","width","time_point_id","input","option","children","toLowerCase","indexOf","time_point_name","componentDidMount","date","Date","getFullYear","getMonth","slice","getDate","get","undefined","Number","res1","componentWillReceiveProps","nextProps","span","offset","padding","textAlign","person_firstname","person_lastname","point_id","point_name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { CookiesProvider, withCookies } from 'react-cookie'\r\nimport { Card, Modal, Input, Button, Col, message, Select, DatePicker, Row, Table } from 'antd'\r\nimport AES from 'crypto-js/aes'\r\nimport base64 from 'crypto-js/enc-base64'\r\nimport CryptoJS from 'crypto-js'\r\nimport moment from 'moment'\r\nconst { Option } = Select;\r\n\r\nclass Monitor extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            modal: false,\r\n            point: [],\r\n            dataEdit: [],\r\n            empoye: [],\r\n            checkLogin: \"\",\r\n            selectDate: \"\",\r\n            selectPoint: [],\r\n            view: [],\r\n            colums: [\r\n                {\r\n                    title: \"วันที่รับบริการ\",\r\n                    dataIndex: \"service_date\"\r\n                },\r\n                {\r\n                    title: \"เวลานัด\",\r\n                    dataIndex: \"time_point_name\"\r\n                },\r\n                {\r\n                    title: \"HN\",\r\n                    dataIndex: \"service_hn\"\r\n                },\r\n                {\r\n                    title: \"ชื่อ-สกุล\",\r\n                    dataIndex: \"pname\"\r\n                },\r\n                {\r\n                    title: \"อายุ\",\r\n                    dataIndex: \"person_age\"\r\n                },\r\n                {\r\n                    title: \"เบอร์ติดต่อ\",\r\n                    dataIndex: \"person_phone\"\r\n                },\r\n                {\r\n                    title: \"จุดรับบริการ\",\r\n                    dataIndex: \"point_name\"\r\n                },\r\n                {\r\n                    title: \"บริการ\",\r\n                    dataIndex: \"service_name_order\"\r\n                },\r\n                {\r\n                    title: \"แก้ไข\",\r\n                    dataIndex: \"service_id\",\r\n                    render: service_id => (<Button onClick={() => this.Edits(service_id)} > แก้ไข</Button>)\r\n                }\r\n            ],\r\n            editColum: [\r\n                {\r\n                    title: \"HN\",\r\n                    dataIndex: \"service_hn\"\r\n                },\r\n                {\r\n                    title: \"ชื่อ\",\r\n                    dataIndex: \"pname\"\r\n                },\r\n                {\r\n                    title: \"วันที่นัด\",\r\n                    dataIndex: \"service_date\",\r\n                    render: (service_date) => (<DatePicker\r\n                        value={moment(service_date)}\r\n                        style={{ width: 'auto' }}\r\n                        onChange={this.dateChange} />)\r\n                },\r\n                {\r\n                    title: \"เวลานัด\",\r\n                    dataIndex: \"time_point_id\",\r\n                    render: (time_point_id) => (<Select\r\n                        showSearch\r\n                        style={{ width: \"auto\" }}\r\n                        placeholder=\"Select a point\"\r\n                        value={this.state.selectPoint}\r\n                        optionFilterProp=\"children\"\r\n                        onChange={this.pointChange}\r\n                        filterOption={(input, option) =>\r\n                            option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                    >\r\n                        <Option value={time_point_id}>{time_point_name}</Option>\r\n                    </Select>)\r\n                },\r\n                {\r\n                    title: \"ลบ\",\r\n                    dataIndex: \"del\"\r\n                }\r\n            ]\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        let date = new Date()\r\n        date = `${date.getFullYear()}-${(\"0\" + (date.getMonth() + 1)).slice(-2)}-${date.getDate()}`\r\n        //console.log(date)\r\n        this.setState({\r\n            selectDate: date\r\n        })\r\n        const { cookies } = this.props;\r\n        if (cookies.get('user') === undefined && cookies.get('pass') === undefined) {\r\n            console.log(\"u\")\r\n        }\r\n        else {\r\n            fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    user: cookies.get('user'),\r\n                    pass: cookies.get('pass')\r\n                })\r\n            })\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                    let checkLogin = res.map(a => a.stat).toString()\r\n                    this.setState({\r\n                        checkLogin: checkLogin,\r\n                        empoye: res,\r\n                        selectPoint: Number(res.map(a => a.point))\r\n                    })\r\n                })\r\n            fetch(\"http://183.88.219.85:7078/appoint/service_point.php\")\r\n                .then(res1 => res1.json())\r\n                .then(res1 => {\r\n                    this.setState({\r\n                        point: res1\r\n                    })\r\n                })\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        console.log(this.props)\r\n        const { cookies } = this.props;\r\n        //console.log(cookies)\r\n        fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({\r\n                user: cookies.get('user'),\r\n                pass: cookies.get('pass')\r\n            })\r\n        }).then(res => res.json())\r\n            .then(res => {\r\n                let checkLogin = res.map(a => a.stat).toString()\r\n                this.setState({\r\n                    checkLogin: checkLogin,\r\n                    empoye: res,\r\n                    selectPoint: Number(res.map(a => a.point))\r\n                })\r\n                fetch(\"http://183.88.219.85:7078/appoint/view_appoint.php\", {\r\n                    method: \"POST\",\r\n                    body: JSON.stringify({\r\n                        dates: this.state.selectDate,\r\n                        point: this.state.selectPoint\r\n                    })\r\n                })\r\n                    .then(view => view.json())\r\n                    .then(view => {\r\n                        this.setState({\r\n                            view: view\r\n                        })\r\n                    })\r\n            })\r\n    }\r\n\r\n    Login = () => {\r\n        const { cookies } = this.props;\r\n        cookies.remove('user')\r\n        cookies.remove('pass')\r\n        let user = document.getElementById('user').value,\r\n            pass = document.getElementById('pass').value\r\n\r\n        user = CryptoJS.enc.Utf8.parse(user)\r\n        user = CryptoJS.enc.Base64.stringify(user)\r\n        pass = CryptoJS.enc.Utf8.parse(pass)\r\n        pass = CryptoJS.enc.Base64.stringify(pass)\r\n\r\n        cookies.set('user', user)\r\n        cookies.set('pass', pass)\r\n        //console.log(this.props.cookies.cookies)\r\n\r\n        fetch(\"http://183.88.219.85:7078/appoint/login.php\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({\r\n                user: user,\r\n                pass: pass\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                let checkLogin = res.map(a => a.stat).toString()\r\n                if (checkLogin === \"1\") {\r\n                    message.success('success')\r\n                    this.setState({\r\n                        checkLogin: checkLogin,\r\n                        empoye: res\r\n                    })\r\n                } else {\r\n                    message.error('username or password')\r\n                    this.setState({\r\n                        checkLogin: checkLogin\r\n                    })\r\n                }\r\n            })\r\n    }\r\n\r\n    delCook = () => {\r\n        const { cookies } = this.props;\r\n        cookies.remove('user')\r\n        cookies.remove('pass')\r\n    }\r\n\r\n    dateChange = (a, b) => {\r\n        console.log(b)\r\n        this.setState({\r\n            selectDate: b\r\n        })\r\n        fetch(\"http://183.88.219.85:7078/appoint/view_appoint.php\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({\r\n                dates: b,\r\n                point: this.state.selectPoint\r\n            })\r\n        }).then(view => view.json())\r\n            .then(view => {\r\n                this.setState({\r\n                    view: view\r\n                })\r\n            })\r\n    }\r\n\r\n    pointChange = (e) => {\r\n        console.log(e)\r\n        this.setState({\r\n            selectPoint: e\r\n        })\r\n        fetch(\"http://183.88.219.85:7078/appoint/view_appoint.php\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({\r\n                dates: this.state.selectDate,\r\n                point: e\r\n            })\r\n        }).then(view => view.json())\r\n            .then(view => {\r\n                this.setState({\r\n                    view: view\r\n                })\r\n            })\r\n    }\r\n\r\n    Edits = (e) => {\r\n        console.log(e)\r\n        this.setState({\r\n            modal: true\r\n        })\r\n        fetch(\"http://183.88.219.85:7078/appoint/view_edit.php\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({\r\n                id: e\r\n            })\r\n        })\r\n            .then(view_edit => view_edit.json())\r\n            .then(view_edit => {\r\n                this.setState({\r\n                    dataEdit: view_edit\r\n                })\r\n            })\r\n    }\r\n\r\n    modalOk = () => {\r\n        this.setState({\r\n            modal: false\r\n        })\r\n    }\r\n\r\n    modalCancal = () => {\r\n        this.setState({\r\n            modal: false\r\n        })\r\n    }\r\n    render() {\r\n        let checkLogin = this.state.checkLogin\r\n        if (checkLogin === \"\" || checkLogin === \"0\") {\r\n            return (\r\n                <CookiesProvider>\r\n                    <div>\r\n                        <Col lg={{ span: 10, offset: 7 }} style={{ padding: \"100px 0px 0px 0px\" }}>\r\n                            <Card>\r\n                                <h1 style={{ textAlign: \"center\" }}>Appointment_Login</h1>\r\n                                <h2>UserName:</h2>\r\n                                <Input id=\"user\" />\r\n                                <h2>Password:</h2>\r\n                                <Input id=\"pass\" type=\"password\" />\r\n                                <br />\r\n                                <br />\r\n                                <Button block size=\"large\" type=\"primary\" onClick={this.Login} >LOGIN</Button>\r\n                                <br />\r\n                                <br />\r\n                                <Button block size=\"large\" type=\"danger\" onClick={this.delCook} >LOGOUT</Button>\r\n                            </Card>\r\n                        </Col>\r\n                    </div>\r\n                </CookiesProvider>\r\n            )\r\n        }\r\n        else if (checkLogin === \"1\") {\r\n            return (\r\n                <div>\r\n                    <CookiesProvider>\r\n                        <div>\r\n                            <Card >\r\n                                {this.state.empoye.map(a => (\r\n                                    <div>\r\n\r\n                                        <Col lg={{ span: 24 }}>\r\n                                            <Col lg={{ span: 19 }}>\r\n                                                <h1 style={{ textAlign: \"left\" }}>ระบบนัดออนไลน์</h1>\r\n                                            </Col>\r\n                                            <Col lg={{ span: 5 }}>\r\n                                                <h3 style={{ textAlign: \"right\" }}>{`${a.person_firstname} ${a.person_lastname} `} <Button style={{ width: \"50\" }} type=\"danger\" onClick={this.delCook} >LOGOUT</Button></h3>\r\n                                            </Col>\r\n                                        </Col>\r\n                                    </div>\r\n                                ))}\r\n                            </Card>\r\n\r\n                            <Card>\r\n                                <h1 style={{ textAlign: \"center\" }}>รายชื่อ</h1>\r\n                                <h3>\r\n                                    จุดบริการ :{\" \"}\r\n                                    <Select\r\n                                        showSearch\r\n                                        style={{ width: 800 }}\r\n                                        placeholder=\"Select a point\"\r\n                                        value={this.state.selectPoint}\r\n                                        optionFilterProp=\"children\"\r\n                                        onChange={this.pointChange}\r\n                                        filterOption={(input, option) =>\r\n                                            option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                        }\r\n                                    >\r\n                                        {this.state.point.map(a => (\r\n                                            <Option value={a.point_id}>{a.point_name}</Option>\r\n                                        ))}\r\n                                    </Select>\r\n                                    {\" \"}\r\n                                    วันที่ :{\" \"}\r\n                                    <DatePicker\r\n                                        value={moment(this.state.selectDate)}\r\n                                        style={{ width: 'auto' }}\r\n                                        onChange={this.dateChange} />\r\n                                </h3>\r\n                            </Card>\r\n                            <Table columns={this.state.colums} dataSource={this.state.view} />\r\n                            <Modal\r\n                                title=\"แก้ไข\"\r\n                                okText={\"บันทึกการแก้ไข\"}\r\n                                cancelText={\"ปิด\"}\r\n                                visible={this.state.modal}\r\n                                onOk={this.modalOk}\r\n                                onCancel={this.modalCancal}\r\n                                width={\"70%\"}\r\n                            >\r\n                                <Table columns={this.state.editColum} dataSource={this.state.dataEdit} />\r\n                            </Modal>\r\n                        </div>\r\n                    </CookiesProvider>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default withCookies(Monitor)"]},"metadata":{},"sourceType":"module"}